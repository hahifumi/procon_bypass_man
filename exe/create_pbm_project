#!/usr/bin/env ruby

gem_root = Gem::Specification.find_by_name("procon_bypass_man").gem_dir
project_dir = "pbm_project"

system("mkdir -p #{project_dir}")
system("cp -r #{gem_root}/examples/recommend/* #{project_dir}")
system("cp -r #{gem_root}/examples/recommend/* #{project_dir}")

current_dir = File.expand_path('..', __FILE__)
File.write "#{project_dir}/setup.sh", "sudo ln -s #{current_dir}/#{project_dir}/systemd_units/pbm.service /etc/systemd/system/pbm.service"
